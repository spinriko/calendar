@page
@model pto.track.Pages.AbsencesSchedulerModel
@{
    ViewData["Title"] = "Absence Scheduler View";
}

<script src="~/lib/daypilot/daypilot-all.min.js" asp-append-version="true"></script>

<style>
    .disabled-row {
        background-color: #eeeeee !important;
        cursor: not-allowed !important;
        pointer-events: none;
    }
</style>

<div class="left">
    <div id="datepicker"></div>
</div>
<div class="right">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; gap: 15px;">
        <div class="buttons">
            <button id="previous">Previous</button>
            <button id="today">Today</button>
            <button id="next">Next</button>
        </div>
        <div class="view-switcher" style="display: flex; gap: 5px;">
            <button id="viewDay" class="view-btn" style="padding: 5px 10px; cursor: pointer;">Day</button>
            <button id="viewWeek" class="view-btn"
                style="padding: 5px 10px; cursor: pointer; font-weight: bold; background-color: #ddd;">Week</button>
            <button id="viewMonth" class="view-btn" style="padding: 5px 10px; cursor: pointer;">Month</button>
        </div>
        <div id="statusFilters"
            style="display: flex; align-items: center; gap: 10px; padding: 8px 12px; background: #f5f5f5; border-radius: 4px;">
            <span style="font-weight: 600; margin-right: 5px;">Show:</span>
            <label style="display: flex; align-items: center; gap: 5px; cursor: pointer; font-size: 13px;">
                <input type="checkbox" id="filterPending" value="Pending" checked
                    style="width: 16px; height: 16px; accent-color: #ffa500;">
                <span>Pending</span>
            </label>
            <label style="display: flex; align-items: center; gap: 5px; cursor: pointer; font-size: 13px;">
                <input type="checkbox" id="filterApproved" value="Approved" checked
                    style="width: 16px; height: 16px; accent-color: #6aa84f;">
                <span>Approved</span>
            </label>
            <label style="display: flex; align-items: center; gap: 5px; cursor: pointer; font-size: 13px;">
                <input type="checkbox" id="filterRejected" value="Rejected" checked
                    style="width: 16px; height: 16px; accent-color: #cc4125;">
                <span>Rejected</span>
            </label>
            <label style="display: flex; align-items: center; gap: 5px; cursor: pointer; font-size: 13px;">
                <input type="checkbox" id="filterCancelled" value="Cancelled" checked
                    style="width: 16px; height: 16px; accent-color: #999999;">
                <span>Cancelled</span>
            </label>
        </div>
    </div>
    <div id="scheduler"></div>
</div>

<script type="module">
    import { AbsenceSchedulerApp } from '/js/absences-scheduler.mjs';

    // Ensure DayPilot is loaded
    if (typeof DayPilot !== 'undefined') {
        const app = new AbsenceSchedulerApp(DayPilot, "scheduler", "datepicker");
        app.init();
    } else {
        console.error("DayPilot library not loaded.");
    }
</script>